import{p,g,S as B}from"./ScrollTrigger-2636db77.js";let d=null;function I(e){return new Promise(t=>{const o=new Image;o.onload=()=>t(!0),o.onerror=()=>t(!1);const A={avif:"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgABogQEAwgMg8f8D///8WfhwB8+ErK42A=",webp:"data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"};o.src=A[e]})}async function P(){if(d)return d;const[e,t]=await Promise.all([I("avif"),I("webp")]);return d={avif:e,webp:t},d}async function b(e){const t=await P();return t.avif&&e.avifSrc?e.avifSrc:t.webp&&e.webpSrc?e.webpSrc:e.src}function m(e){return new Promise((t,o)=>{const A=new Image;A.onload=()=>t(),A.onerror=()=>{console.warn(`Failed to preload image: ${e}`),t()},A.src=e})}async function h(e){const t=await b(e);await m(t)}async function x(e){const t=e.id;if(!t){const a=p.map(n=>h(n.imgOptions));await Promise.all(a),await S();return}const o=p.findIndex(a=>a.id===t);if(o===-1){await T(e);return}const s=Array.from({length:o+1},(a,n)=>n).map(a=>h(p[a].imgOptions));await Promise.all(s),await S()}async function S(){const e=document.querySelectorAll('img[loading="lazy"]');if(e.length===0)return;const t=[];e.forEach((o,A)=>{const s=new Promise(a=>{if(o.complete){a();return}const n=o.loading;o.loading="eager";const i=()=>{o.removeEventListener("load",i),o.removeEventListener("error",i),o.loading=n,a()};if(o.addEventListener("load",i),o.addEventListener("error",i),!o.complete){const r=o.src;o.src="",o.src=r}});t.push(s)}),await Promise.all(t)}async function T(e){const t=e.querySelectorAll("img"),o=[];t.forEach(n=>{n.src&&o.push(m(n.src)),n.srcset&&n.srcset.split(",").map(r=>r.trim().split(" ")[0]).forEach(r=>{r&&o.push(m(r))})}),e.querySelectorAll("source").forEach(n=>{n.srcset&&n.srcset.split(",").map(r=>r.trim().split(" ")[0]).forEach(r=>{r&&o.push(m(r))})}),await Promise.all(o);const s=e.querySelectorAll('img[loading="lazy"]'),a=[];s.forEach(n=>{const i=new Promise(r=>{if(n.complete){r();return}const f=n.loading;n.loading="eager";const l=()=>{n.removeEventListener("load",l),n.removeEventListener("error",l),n.loading=f,r()};if(n.addEventListener("load",l),n.addEventListener("error",l),!n.complete){const w=n.src;n.src="",n.src=w}});a.push(i)}),await Promise.all(a)}function v(e,t,o){const A=e.getBoundingClientRect(),s=window.pageYOffset||document.documentElement.scrollTop;if(o){const a=window.innerHeight/2-A.height/2;return s+A.top-a+t}return s+A.top+t}function L(e){return{"out-expo":"expo.out","in-expo":"expo.in","inout-expo":"expo.inOut","out-quint":"power4.out",outQuint:"power4.out","in-quint":"power4.in","inout-quint":"power4.inOut","out-cubic":"power2.out","in-cubic":"power2.in","inout-cubic":"power2.inOut",linear:"none"}[e]||e}async function j(e,t={}){const{duration:o=1e3,ease:A="out-expo",offset:s=0,onComplete:a,preloadImages:n=!0,centerInViewport:i=!1}=t,r=typeof e=="string"?document.querySelector(e):e;if(!r){console.warn(`Target element not found: ${e}`);return}if(await W(),n){if(r.id&&p.some(c=>c.id===r.id))await x(r);else{const c=p.map(u=>h(u.imgOptions));await Promise.all(c),await S()}await new Promise(c=>setTimeout(c,100)),r.offsetHeight}const f=v(r,s,i),l=Math.max(0,document.body.scrollHeight-window.innerHeight),w=Math.max(0,Math.min(f,l)),E=L(A),y=window.pageYOffset||document.documentElement.scrollTop;return new Promise(c=>{const u={scrollTop:y};g.to(u,{duration:o/1e3,scrollTop:w,ease:E,onUpdate:()=>{window.scrollTo(0,u.scrollTop)},onComplete:()=>{a&&a(),c()},onInterrupt:()=>{console.warn("Scroll animation was interrupted"),c()}})})}async function W(){const e=document.querySelector(".projects-section-on-load");e&&(g.killTweensOf(e),g.set(e,{opacity:1,filter:"blur(0px)",y:0,transform:"translateY(0px)"}),B.refresh()),await new Promise(t=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{t(void 0)})})}),await new Promise(t=>setTimeout(t,50)),e&&e.offsetHeight}function q(e){const{spacing:t="default"}=e??{};console.log("spacing:",t);let o=0;return window.innerWidth>=768?o+=80:o+=64,t==="lg"?window.innerWidth>=768?o+=48:o+=36:t==="md"?window.innerWidth>=768?o+=20:o+=16:t==="sm"&&(window.innerWidth>=768?o+=12:o+=8),-o}export{q as g,j as r};
