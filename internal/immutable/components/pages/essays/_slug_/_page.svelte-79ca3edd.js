import{S as me,i as _e,s as ge,k as y,l as E,m as $,h as b,n as x,b as L,C as K,R as J,e as G,q as A,a as R,r as D,c as H,F as f,H as ve,u as be,a9 as ye,aa as Ee,x as W,y as X,z as Y,f as V,d as Z,t as j,A as ee,E as $e,o as we,g as te}from"../../../../chunks/index-1b60df3c.js";import{g as xe,r as ke}from"../../../../chunks/reliableScroll-09e90851.js";import{I as Se}from"../../../../chunks/Icon-be99e60f.js";import{S as Ie}from"../../../../chunks/Separator-e4a3d9e5.js";import{t as Ne}from"../../../../chunks/parse-d81214d6.js";import{b as Pe,s as Ae,c as De}from"../../../../chunks/essayNav-a8b4dd3d.js";function re(r,e,l){const t=r.slice();return t[4]=e[l],t}function Oe(r){let e,l,t,n,o=" ",h,i,c,m=Q(r[4])+"",a,p,s=" ",d,u,I,k,N;function P(){return r[3](r[4])}return{c(){e=y("button"),l=y("span"),t=A("["),n=y("span"),h=A(o),i=R(),c=y("span"),a=A(m),p=y("span"),d=A(s),u=A("]"),I=R(),this.h()},l(g){e=E(g,"BUTTON",{class:!0});var T=$(e);l=E(T,"SPAN",{class:!0});var w=$(l);t=D(w,"["),n=E(w,"SPAN",{class:!0});var v=$(n);h=D(v,o),v.forEach(b),i=H(w),c=E(w,"SPAN",{class:!0});var S=$(c);a=D(S,m),S.forEach(b),p=E(w,"SPAN",{class:!0});var _=$(p);d=D(_,s),_.forEach(b),u=D(w,"]"),w.forEach(b),I=H(T),T.forEach(b),this.h()},h(){x(n,"class","text-[0.32rem]"),x(c,"class","underline decoration-glacial-blue/60 group-hover:decoration-glacial-blue"),x(p,"class","text-[0.32rem]"),x(l,"class","text-sm text-muted-text-grey group-hover:text-white transition-colors"),x(e,"class","group inline-flex items-baseline border-none bg-transparent p-0 cursor-pointer")},m(g,T){L(g,e,T),f(e,l),f(l,t),f(l,n),f(n,h),f(l,i),f(l,c),f(c,a),f(l,p),f(p,d),f(l,u),f(e,I),k||(N=ve(e,"click",P),k=!0)},p(g,T){r=g,T&1&&m!==(m=Q(r[4])+"")&&be(a,m)},d(g){g&&b(e),k=!1,N()}}}function Re(r){let e,l=r[4].text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"",t;return{c(){e=new ye(!1),t=G(),this.h()},l(n){e=Ee(n,!1),t=G(),this.h()},h(){e.a=t},m(n,o){e.m(l,n,o),L(n,t,o)},p(n,o){o&1&&l!==(l=n[4].text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"")&&e.p(l)},d(n){n&&b(t),n&&e.d()}}}function ie(r){let e;function l(o,h){if(o[4].type==="text")return Re;if(o[4].type==="ref")return Oe}let t=l(r),n=t&&t(r);return{c(){n&&n.c(),e=G()},l(o){n&&n.l(o),e=G()},m(o,h){n&&n.m(o,h),L(o,e,h)},p(o,h){t===(t=l(o))&&n?n.p(o,h):(n&&n.d(1),n=t&&t(o),n&&(n.c(),n.m(e.parentNode,e)))},d(o){n&&n.d(o),o&&b(e)}}}function He(r){let e,l,t=r[0],n=[];for(let o=0;o<t.length;o+=1)n[o]=ie(re(r,t,o));return{c(){e=y("p");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=E(o,"P",{class:!0,id:!0});var h=$(e);for(let i=0;i<n.length;i+=1)n[i].l(h);h.forEach(b),this.h()},h(){x(e,"class","font-serif text-description-text-grey"),x(e,"id",l=r[1]?`footnote-ref-${r[1]}`:void 0)},m(o,h){L(o,e,h);for(let i=0;i<n.length;i+=1)n[i].m(e,null)},p(o,[h]){if(h&5){t=o[0];let i;for(i=0;i<t.length;i+=1){const c=re(o,t,i);n[i]?n[i].p(c,h):(n[i]=ie(c),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}h&2&&l!==(l=o[1]?`footnote-ref-${o[1]}`:void 0)&&x(e,"id",l)},i:K,o:K,d(o){o&&b(e),J(n,o)}}}function Q(r){return r.num}function Te(r,e,l){let{tokens:t}=e,n;async function o(i){const c=xe({spacing:"sm"});await ke(`#footnote-${i}`,{duration:1e3,ease:"out-expo",offset:c})}const h=i=>o(Q(i));return r.$$set=i=>{"tokens"in i&&l(0,t=i.tokens)},r.$$.update=()=>{var i;r.$$.dirty&1&&l(1,n=(i=t.find(c=>c.type==="ref"))==null?void 0:i.num)},[t,n,o,h]}class Ve extends me{constructor(e){super(),_e(this,e,Te,He,ge,{tokens:0})}}function ce(r,e,l){const t=r.slice();return t[6]=e[l][0],t[7]=e[l][1],t}function fe(r,e,l){const t=r.slice();return t[10]=e[l],t[12]=l,t}function ue(r,e,l){const t=r.slice();return t[13]=e[l],t}function he(r){let e,l;return e=new Ve({props:{tokens:Ne(r[13])}}),{c(){W(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,n){Y(e,t,n),l=!0},p:K,i(t){l||(V(e.$$.fragment,t),l=!0)},o(t){j(e.$$.fragment,t),l=!1},d(t){ee(e,t)}}}function de(r){let e,l,t=r[10].heading+"",n,o,h,i,c,m=r[10].paragraphs,a=[];for(let s=0;s<m.length;s+=1)a[s]=he(ue(r,m,s));const p=s=>j(a[s],1,1,()=>{a[s]=null});return{c(){e=y("section"),l=y("h2"),n=A(t),o=R(),h=y("div");for(let s=0;s<a.length;s+=1)a[s].c();i=R(),this.h()},l(s){e=E(s,"SECTION",{id:!0,"data-essay-section":!0});var d=$(e);l=E(d,"H2",{class:!0});var u=$(l);n=D(u,t),u.forEach(b),o=H(d),h=E(d,"DIV",{class:!0});var I=$(h);for(let k=0;k<a.length;k+=1)a[k].l(I);I.forEach(b),i=H(d),d.forEach(b),this.h()},h(){x(l,"class","text-xl md:text-2xl font-semibold text-white"),x(h,"class","mt-3 space-y-4"),x(e,"id",`section-${r[12]}`),x(e,"data-essay-section","true")},m(s,d){L(s,e,d),f(e,l),f(l,n),f(e,o),f(e,h);for(let u=0;u<a.length;u+=1)a[u].m(h,null);f(e,i),c=!0},p(s,d){if(d&2){m=s[10].paragraphs;let u;for(u=0;u<m.length;u+=1){const I=ue(s,m,u);a[u]?(a[u].p(I,d),V(a[u],1)):(a[u]=he(I),a[u].c(),V(a[u],1),a[u].m(h,null))}for(te(),u=m.length;u<a.length;u+=1)p(u);Z()}},i(s){if(!c){for(let d=0;d<m.length;d+=1)V(a[d]);c=!0}},o(s){a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)j(a[d]);c=!1},d(s){s&&b(e),J(a,s)}}}function Ce(r){let e,l,t,n,o,h,i=Object.entries(r[1].footnotes),c=[];for(let a=0;a<i.length;a+=1)c[a]=pe(ce(r,i,a));const m=a=>j(c[a],1,1,()=>{c[a]=null});return{c(){e=y("div"),l=y("h2"),t=A("Notes"),n=R(),o=y("div");for(let a=0;a<c.length;a+=1)c[a].c();this.h()},l(a){e=E(a,"DIV",{class:!0,id:!0,"data-essay-section":!0});var p=$(e);l=E(p,"H2",{class:!0});var s=$(l);t=D(s,"Notes"),s.forEach(b),n=H(p),o=E(p,"DIV",{class:!0});var d=$(o);for(let u=0;u<c.length;u+=1)c[u].l(d);d.forEach(b),p.forEach(b),this.h()},h(){x(l,"class","text-xl md:text-2xl font-semibold text-white"),x(o,"class","mt-4 space-y-2"),x(e,"class","mt-[8em] md:mt-[12em]"),x(e,"id","section-notes"),x(e,"data-essay-section","true")},m(a,p){L(a,e,p),f(e,l),f(l,t),f(e,n),f(e,o);for(let s=0;s<c.length;s+=1)c[s].m(o,null);h=!0},p(a,p){if(p&6){i=Object.entries(a[1].footnotes);let s;for(s=0;s<i.length;s+=1){const d=ce(a,i,s);c[s]?(c[s].p(d,p),V(c[s],1)):(c[s]=pe(d),c[s].c(),V(c[s],1),c[s].m(o,null))}for(te(),s=i.length;s<c.length;s+=1)m(s);Z()}},i(a){if(!h){for(let p=0;p<i.length;p+=1)V(c[p]);h=!0}},o(a){c=c.filter(Boolean);for(let p=0;p<c.length;p+=1)j(c[p]);h=!1},d(a){a&&b(e),J(c,a)}}}function pe(r){let e,l,t,n,o,h=" ",i,c,m,a=r[6]+"",p,s,d=" ",u,I,k,N,P,g=" ",T,w,v,S=r[7]+"",_,C,q,z,M;k=new Se({props:{name:"arrow-up",size:"12px",class:"inline text-muted-text-grey group-hover:text-white transition-colors"}});function U(){return r[4](r[6])}return{c(){e=y("div"),l=y("button"),t=y("p"),n=A("["),o=y("span"),i=A(h),c=R(),m=y("span"),p=A(a),s=y("span"),u=A(d),I=R(),W(k.$$.fragment),N=R(),P=y("span"),T=A(g),w=A("]"),v=R(),_=A(S),C=R(),this.h()},l(O){e=E(O,"DIV",{id:!0,class:!0});var F=$(e);l=E(F,"BUTTON",{class:!0});var le=$(l);t=E(le,"P",{class:!0});var B=$(t);n=D(B,"["),o=E(B,"SPAN",{class:!0});var ne=$(o);i=D(ne,h),ne.forEach(b),c=H(B),m=E(B,"SPAN",{class:!0});var oe=$(m);p=D(oe,a),oe.forEach(b),s=E(B,"SPAN",{class:!0});var se=$(s);u=D(se,d),se.forEach(b),I=H(B),X(k.$$.fragment,B),N=H(B),P=E(B,"SPAN",{class:!0});var ae=$(P);T=D(ae,g),ae.forEach(b),w=D(B,"]"),B.forEach(b),le.forEach(b),v=H(F),_=D(F,S),C=H(F),F.forEach(b),this.h()},h(){x(o,"class","text-[0.9rem]"),x(m,"class","text-white underline decoration-glacial-blue"),x(s,"class","text-[0.32rem]"),x(P,"class","text-[0.32rem]"),x(t,"class","text-sm text-muted-text-grey group-hover:text-white transition-colors"),x(l,"class","group inline-flex items-center px-1 py-0.5 rounded border-none bg-transparent cursor-pointer hover:bg-gray-700 transition-colors"),x(e,"id",`footnote-${r[6]}`),x(e,"class","text-sm md:text-base text-muted-text-grey")},m(O,F){L(O,e,F),f(e,l),f(l,t),f(t,n),f(t,o),f(o,i),f(t,c),f(t,m),f(m,p),f(t,s),f(s,u),f(t,I),Y(k,t,null),f(t,N),f(t,P),f(P,T),f(t,w),f(e,v),f(e,_),f(e,C),q=!0,z||(M=ve(l,"click",U),z=!0)},p(O,F){r=O},i(O){q||(V(k.$$.fragment,O),q=!0)},o(O){j(k.$$.fragment,O),q=!1},d(O){O&&b(e),ee(k),z=!1,M()}}}function Be(r){let e,l,t,n,o=r[1].title+"",h,i,c,m,a,p,s,d,u,I,k=Object.keys(r[1].footnotes).length,N;s=new Ie({});let P=r[1].sections,g=[];for(let v=0;v<P.length;v+=1)g[v]=de(fe(r,P,v));const T=v=>j(g[v],1,1,()=>{g[v]=null});let w=k&&Ce(r);return{c(){e=y("article"),l=y("div"),t=y("header"),n=y("h1"),h=A(o),i=R(),c=y("p"),m=A(r[0]),a=R(),p=y("div"),W(s.$$.fragment),d=R(),u=y("div");for(let v=0;v<g.length;v+=1)g[v].c();I=R(),w&&w.c(),this.h()},l(v){e=E(v,"ARTICLE",{class:!0});var S=$(e);l=E(S,"DIV",{});var _=$(l);t=E(_,"HEADER",{});var C=$(t);n=E(C,"H1",{class:!0});var q=$(n);h=D(q,o),q.forEach(b),i=H(C),c=E(C,"P",{class:!0});var z=$(c);m=D(z,r[0]),z.forEach(b),C.forEach(b),a=H(_),p=E(_,"DIV",{class:!0});var M=$(p);X(s.$$.fragment,M),M.forEach(b),d=H(_),u=E(_,"DIV",{class:!0});var U=$(u);for(let O=0;O<g.length;O+=1)g[O].l(U);U.forEach(b),I=H(_),w&&w.l(_),_.forEach(b),S.forEach(b),this.h()},h(){x(n,"class","text-3xl md:text-4xl font-bold text-glacial-blue leading-[1.175] md:leading-[1.1]"),x(c,"class","text-muted-text-grey mt-3.5 md:mt-4"),x(p,"class","my-9 md:my-12"),x(u,"class","space-y-8"),x(e,"class","py-8 md:py-12 max-w-screen-sm mx-auto")},m(v,S){L(v,e,S),f(e,l),f(l,t),f(t,n),f(n,h),f(t,i),f(t,c),f(c,m),f(l,a),f(l,p),Y(s,p,null),f(l,d),f(l,u);for(let _=0;_<g.length;_+=1)g[_].m(u,null);f(l,I),w&&w.m(l,null),N=!0},p(v,[S]){if((!N||S&1)&&be(m,v[0]),S&2){P=v[1].sections;let _;for(_=0;_<P.length;_+=1){const C=fe(v,P,_);g[_]?(g[_].p(C,S),V(g[_],1)):(g[_]=de(C),g[_].c(),V(g[_],1),g[_].m(u,null))}for(te(),_=P.length;_<g.length;_+=1)T(_);Z()}k&&w.p(v,S)},i(v){if(!N){V(s.$$.fragment,v);for(let S=0;S<P.length;S+=1)V(g[S]);V(w),N=!0}},o(v){j(s.$$.fragment,v),g=g.filter(Boolean);for(let S=0;S<g.length;S+=1)j(g[S]);j(w),N=!1},d(v){v&&b(e),ee(s),J(g,v),w&&w.d()}}}function je(r,e,l){let t,n;$e(r,De,m=>l(5,n=m));let{data:o}=e;const{post:h}=o;async function i(m){const a=xe({spacing:"default"});await ke(`#footnote-ref-${m}`,{duration:1e3,ease:"out-expo",offset:a,centerInViewport:!0})}we(()=>{const m=h.sections.map((d,u)=>({id:`section-${u}`,label:d.heading}));Object.keys(h.footnotes).length&&m.push({id:"section-notes",label:"Notes"}),Pe(m);const a={root:null,rootMargin:"0px",threshold:[0,1]},p=Array.from(document.querySelectorAll('[data-essay-section="true"]')),s=new IntersectionObserver(()=>{if(n)return;const d=window.innerHeight/2,u=p.map(k=>k.getBoundingClientRect());let I=u.findIndex(k=>k.top<=d&&k.bottom>=d);if(I===-1){let k=0;for(let N=0;N<u.length&&u[N].top<=d;N++)k=N;I=k}Ae.update(k=>k===I?k:I)},a);return p.forEach(d=>s.observe(d)),()=>s.disconnect()});const c=m=>i(m);return r.$$set=m=>{"data"in m&&l(3,o=m.data)},l(0,t=new Date(h.date).toLocaleDateString("en-US",{month:"long",year:"numeric"})),[t,h,i,o,c]}class Ge extends me{constructor(e){super(),_e(this,e,je,Be,ge,{data:3})}}export{Ge as default};
