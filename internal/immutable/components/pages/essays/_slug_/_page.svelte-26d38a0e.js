import{S as ne,i as oe,s as se,k,l as E,m as y,h as _,n as b,b as C,C as U,R as K,e as J,q as D,a as H,r as R,c as O,F as u,H as ye,u as we,a9 as xe,aa as $e,o as Ne,x as W,a8 as Le,y as X,z as Y,f as A,d as re,t as B,A as Z,E as He,O as Oe,g as ae}from"../../../../chunks/index-1b60df3c.js";import{g as Ie,r as Se}from"../../../../chunks/reliableScroll-0bbe784d.js";import{I as Ae}from"../../../../chunks/Icon-bf4450dd.js";import{S as Pe}from"../../../../chunks/Separator-e4a3d9e5.js";import{b as Te,s as De,c as Re}from"../../../../chunks/essayNav-a8b4dd3d.js";import{H as ee}from"../../../../chunks/index-3b593a9d.js";function he(a,e,n){const l=a.slice();return l[4]=e[n],l}function Ce(a){let e,n,l,t,o=" ",r,s,i,h=le(a[4])+"",c,m,f=" ",g,d,$,w,V;function j(){return a[3](a[4])}return{c(){e=k("button"),n=k("span"),l=D("["),t=k("span"),r=D(o),s=H(),i=k("span"),c=D(h),m=k("span"),g=D(f),d=D("]"),$=H(),this.h()},l(L){e=E(L,"BUTTON",{class:!0});var I=y(e);n=E(I,"SPAN",{class:!0});var v=y(n);l=R(v,"["),t=E(v,"SPAN",{class:!0});var q=y(t);r=R(q,o),q.forEach(_),s=O(v),i=E(v,"SPAN",{class:!0});var S=y(i);c=R(S,h),S.forEach(_),m=E(v,"SPAN",{class:!0});var p=y(m);g=R(p,f),p.forEach(_),d=R(v,"]"),v.forEach(_),$=O(I),I.forEach(_),this.h()},h(){b(t,"class","text-[0.32rem]"),b(i,"class","underline decoration-glacial-blue/60 group-hover:decoration-glacial-blue"),b(m,"class","text-[0.32rem]"),b(n,"class","text-sm text-muted-text-grey group-hover:text-white transition-colors"),b(e,"class","group inline-flex items-baseline border-none bg-transparent p-0 cursor-pointer")},m(L,I){C(L,e,I),u(e,n),u(n,l),u(n,t),u(t,r),u(n,s),u(n,i),u(i,c),u(n,m),u(m,g),u(n,d),u(e,$),w||(V=ye(e,"click",j),w=!0)},p(L,I){a=L,I&1&&h!==(h=le(a[4])+"")&&we(c,h)},d(L){L&&_(e),w=!1,V()}}}function Me(a){let e,n=a[4].text+"",l;return{c(){e=new xe(!1),l=J(),this.h()},l(t){e=$e(t,!1),l=J(),this.h()},h(){e.a=l},m(t,o){e.m(n,t,o),C(t,l,o)},p(t,o){o&1&&n!==(n=t[4].text+"")&&e.p(n)},d(t){t&&_(l),t&&e.d()}}}function de(a){let e;function n(o,r){if(o[4].type==="text")return Me;if(o[4].type==="ref")return Ce}let l=n(a),t=l&&l(a);return{c(){t&&t.c(),e=J()},l(o){t&&t.l(o),e=J()},m(o,r){t&&t.m(o,r),C(o,e,r)},p(o,r){l===(l=n(o))&&t?t.p(o,r):(t&&t.d(1),t=l&&l(o),t&&(t.c(),t.m(e.parentNode,e)))},d(o){t&&t.d(o),o&&_(e)}}}function Be(a){let e,n,l=a[0],t=[];for(let o=0;o<l.length;o+=1)t[o]=de(he(a,l,o));return{c(){e=k("p");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=E(o,"P",{class:!0,id:!0});var r=y(e);for(let s=0;s<t.length;s+=1)t[s].l(r);r.forEach(_),this.h()},h(){b(e,"class","font-serif text-description-text-grey"),b(e,"id",n=a[1]?`footnote-ref-${a[1]}`:void 0)},m(o,r){C(o,e,r);for(let s=0;s<t.length;s+=1)t[s].m(e,null)},p(o,[r]){if(r&5){l=o[0];let s;for(s=0;s<l.length;s+=1){const i=he(o,l,s);t[s]?t[s].p(i,r):(t[s]=de(i),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=l.length}r&2&&n!==(n=o[1]?`footnote-ref-${o[1]}`:void 0)&&b(e,"id",n)},i:U,o:U,d(o){o&&_(e),K(t,o)}}}function le(a){return a.num}function Ve(a,e,n){let{tokens:l}=e,t;async function o(s){const i=Ie({spacing:"lg"}),h=`footnote-${s}`,c=document.getElementById(h);c&&(c.classList.add("footnote-bg-anim"),c.classList.add("footnote-bg-highlight"),await Se(c,{duration:1e3,ease:"out-expo",offset:i}),setTimeout(()=>{c.classList.remove("footnote-bg-highlight")},0))}const r=s=>o(le(s));return a.$$set=s=>{"tokens"in s&&n(0,l=s.tokens)},a.$$.update=()=>{var s;a.$$.dirty&1&&n(1,t=(s=l.find(i=>i.type==="ref"))==null?void 0:s.num)},[l,t,o,r]}class je extends ne{constructor(e){super(),oe(this,e,Ve,Be,se,{tokens:0})}}function ze(a){let e,n,l;return{c(){e=k("pre"),n=k("code"),this.h()},l(t){e=E(t,"PRE",{});var o=y(e);n=E(o,"CODE",{class:!0});var r=y(n);r.forEach(_),o.forEach(_),this.h()},h(){b(n,"class",l="hljs "+(a[0]||""))},m(t,o){C(t,e,o),u(e,n),n.innerHTML=a[1]},p(t,[o]){o&2&&(n.innerHTML=t[1]),o&1&&l!==(l="hljs "+(t[0]||""))&&b(n,"class",l)},i:U,o:U,d(t){t&&_(e)}}}function Ue(a,e,n){let{code:l}=e,{lang:t}=e,o="";return Ne(()=>{t&&ee.getLanguage(t)?n(1,o=ee.highlight(l,{language:t}).value):n(1,o=ee.highlightAuto(l).value)}),a.$$set=r=>{"code"in r&&n(2,l=r.code),"lang"in r&&n(0,t=r.lang)},[t,o,l]}class qe extends ne{constructor(e){super(),oe(this,e,Ue,ze,se,{code:2,lang:0})}}const{document:te}=Oe;function _e(a,e,n){const l=a.slice();return l[8]=e[n][0],l[9]=e[n][1],l}function me(a,e,n){const l=a.slice();return l[12]=e[n],l[14]=n,l}function ge(a,e,n){const l=a.slice();return l[15]=e[n],l}function pe(a,e,n){const l=a.slice();return l[18]=e[n],l}function Fe(a){let e,n,l=a[15].items,t=[];for(let o=0;o<l.length;o+=1)t[o]=ve(pe(a,l,o));return{c(){e=k("ul");for(let o=0;o<t.length;o+=1)t[o].c();n=H(),this.h()},l(o){e=E(o,"UL",{class:!0});var r=y(e);for(let s=0;s<t.length;s+=1)t[s].l(r);n=O(r),r.forEach(_),this.h()},h(){b(e,"class","list-disc pl-5 space-y-2 font-serif text-description-text-grey")},m(o,r){C(o,e,r);for(let s=0;s<t.length;s+=1)t[s].m(e,null);u(e,n)},p(o,r){if(r&2){l=o[15].items;let s;for(s=0;s<l.length;s+=1){const i=pe(o,l,s);t[s]?t[s].p(i,r):(t[s]=ve(i),t[s].c(),t[s].m(e,n))}for(;s<t.length;s+=1)t[s].d(1);t.length=l.length}},i:U,o:U,d(o){o&&_(e),K(t,o)}}}function Je(a){let e,n;return e=new qe({props:{lang:a[15].lang,code:a[15].code}}),{c(){W(e.$$.fragment)},l(l){X(e.$$.fragment,l)},m(l,t){Y(e,l,t),n=!0},p:U,i(l){n||(A(e.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),n=!1},d(l){Z(e,l)}}}function Ge(a){let e,n;return e=new je({props:{tokens:a[15].tokens}}),{c(){W(e.$$.fragment)},l(l){X(e.$$.fragment,l)},m(l,t){Y(e,l,t),n=!0},p:U,i(l){n||(A(e.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),n=!1},d(l){Z(e,l)}}}function ve(a){let e,n=a[18]+"";return{c(){e=k("li")},l(l){e=E(l,"LI",{});var t=y(e);t.forEach(_)},m(l,t){C(l,e,t),e.innerHTML=n},p:U,d(l){l&&_(e)}}}function be(a){let e,n,l,t;const o=[Ge,Je,Fe],r=[];function s(i,h){return i[15].type==="paragraph"?0:i[15].type==="code"?1:i[15].type==="list"?2:-1}return~(e=s(a))&&(n=r[e]=o[e](a)),{c(){n&&n.c(),l=J()},l(i){n&&n.l(i),l=J()},m(i,h){~e&&r[e].m(i,h),C(i,l,h),t=!0},p(i,h){n&&n.p(i,h)},i(i){t||(A(n),t=!0)},o(i){B(n),t=!1},d(i){~e&&r[e].d(i),i&&_(l)}}}function ke(a){let e,n,l=a[12].heading+"",t,o,r,s,i,h=a[12].content,c=[];for(let f=0;f<h.length;f+=1)c[f]=be(ge(a,h,f));const m=f=>B(c[f],1,1,()=>{c[f]=null});return{c(){e=k("section"),n=k("h2"),t=D(l),o=H(),r=k("div");for(let f=0;f<c.length;f+=1)c[f].c();s=H(),this.h()},l(f){e=E(f,"SECTION",{id:!0,"data-essay-section":!0});var g=y(e);n=E(g,"H2",{class:!0});var d=y(n);t=R(d,l),d.forEach(_),o=O(g),r=E(g,"DIV",{class:!0});var $=y(r);for(let w=0;w<c.length;w+=1)c[w].l($);$.forEach(_),s=O(g),g.forEach(_),this.h()},h(){b(n,"class","text-xl md:text-2xl font-semibold text-white"),b(r,"class","mt-3 space-y-4"),b(e,"id",`section-${a[14]}`),b(e,"data-essay-section","true")},m(f,g){C(f,e,g),u(e,n),u(n,t),u(e,o),u(e,r);for(let d=0;d<c.length;d+=1)c[d].m(r,null);u(e,s),i=!0},p(f,g){if(g&2){h=f[12].content;let d;for(d=0;d<h.length;d+=1){const $=ge(f,h,d);c[d]?(c[d].p($,g),A(c[d],1)):(c[d]=be($),c[d].c(),A(c[d],1),c[d].m(r,null))}for(ae(),d=h.length;d<c.length;d+=1)m(d);re()}},i(f){if(!i){for(let g=0;g<h.length;g+=1)A(c[g]);i=!0}},o(f){c=c.filter(Boolean);for(let g=0;g<c.length;g+=1)B(c[g]);i=!1},d(f){f&&_(e),K(c,f)}}}function Ke(a){let e,n,l,t,o=Object.keys(a[1].footnotes).length,r,s,i=o&&Qe(a),h=a[1].contributionNote&&We(a);return{c(){e=k("div"),n=k("h2"),l=D("Notes"),t=H(),i&&i.c(),r=H(),h&&h.c(),this.h()},l(c){e=E(c,"DIV",{class:!0,id:!0,"data-essay-section":!0});var m=y(e);n=E(m,"H2",{class:!0});var f=y(n);l=R(f,"Notes"),f.forEach(_),t=O(m),i&&i.l(m),r=O(m),h&&h.l(m),m.forEach(_),this.h()},h(){b(n,"class","text-xl md:text-2xl font-semibold text-white"),b(e,"class","mt-[8em] md:mt-[12em]"),b(e,"id","section-notes"),b(e,"data-essay-section","true")},m(c,m){C(c,e,m),u(e,n),u(n,l),u(e,t),i&&i.m(e,null),u(e,r),h&&h.m(e,null),s=!0},p(c,m){o&&i.p(c,m),c[1].contributionNote&&h.p(c,m)},i(c){s||(A(i),s=!0)},o(c){B(i),s=!1},d(c){c&&_(e),i&&i.d(),h&&h.d()}}}function Qe(a){let e,n,l=Object.entries(a[1].footnotes),t=[];for(let r=0;r<l.length;r+=1)t[r]=Ee(_e(a,l,r));const o=r=>B(t[r],1,1,()=>{t[r]=null});return{c(){e=k("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=E(r,"DIV",{class:!0});var s=y(e);for(let i=0;i<t.length;i+=1)t[i].l(s);s.forEach(_),this.h()},h(){b(e,"class","mt-4 space-y-2")},m(r,s){C(r,e,s);for(let i=0;i<t.length;i+=1)t[i].m(e,null);n=!0},p(r,s){if(s&6){l=Object.entries(r[1].footnotes);let i;for(i=0;i<l.length;i+=1){const h=_e(r,l,i);t[i]?(t[i].p(h,s),A(t[i],1)):(t[i]=Ee(h),t[i].c(),A(t[i],1),t[i].m(e,null))}for(ae(),i=l.length;i<t.length;i+=1)o(i);re()}},i(r){if(!n){for(let s=0;s<l.length;s+=1)A(t[s]);n=!0}},o(r){t=t.filter(Boolean);for(let s=0;s<t.length;s+=1)B(t[s]);n=!1},d(r){r&&_(e),K(t,r)}}}function Ee(a){let e,n,l,t,o,r=" ",s,i,h,c=a[8]+"",m,f,g=" ",d,$,w,V,j,L=" ",I,v,q,S,p=a[9]+"",N,x,P,F;w=new Ae({props:{name:"arrow-up",size:"12px",class:"inline text-muted-text-grey group-hover:text-white transition-colors"}});function Q(){return a[4](a[8])}return{c(){e=k("div"),n=k("button"),l=k("p"),t=D("["),o=k("span"),s=D(r),i=H(),h=k("span"),m=D(c),f=k("span"),d=D(g),$=H(),W(w.$$.fragment),V=H(),j=k("span"),I=D(L),v=D("]"),q=H(),S=new xe(!1),N=H(),this.h()},l(M){e=E(M,"DIV",{id:!0,class:!0});var z=y(e);n=E(z,"BUTTON",{class:!0});var G=y(n);l=E(G,"P",{class:!0});var T=y(l);t=R(T,"["),o=E(T,"SPAN",{class:!0});var ie=y(o);s=R(ie,r),ie.forEach(_),i=O(T),h=E(T,"SPAN",{class:!0});var ce=y(h);m=R(ce,c),ce.forEach(_),f=E(T,"SPAN",{class:!0});var fe=y(f);d=R(fe,g),fe.forEach(_),$=O(T),X(w.$$.fragment,T),V=O(T),j=E(T,"SPAN",{class:!0});var ue=y(j);I=R(ue,L),ue.forEach(_),v=R(T,"]"),T.forEach(_),G.forEach(_),q=O(z),S=$e(z,!1),N=O(z),z.forEach(_),this.h()},h(){b(o,"class","text-[0.9rem]"),b(h,"class","text-white underline decoration-glacial-blue"),b(f,"class","text-[0.32rem]"),b(j,"class","text-[0.32rem]"),b(l,"class","text-sm text-muted-text-grey group-hover:text-white transition-colors"),b(n,"class","group inline-flex items-center px-1 py-0.5 rounded border-none bg-transparent cursor-pointer hover:bg-gray-700 transition-colors"),S.a=N,b(e,"id",`footnote-${a[8]}`),b(e,"class","font-serif text-sm md:text-base text-muted-text-grey")},m(M,z){C(M,e,z),u(e,n),u(n,l),u(l,t),u(l,o),u(o,s),u(l,i),u(l,h),u(h,m),u(l,f),u(f,d),u(l,$),Y(w,l,null),u(l,V),u(l,j),u(j,I),u(l,v),u(e,q),S.m(p,e),u(e,N),x=!0,P||(F=ye(n,"click",Q),P=!0)},p(M,z){a=M},i(M){x||(A(w.$$.fragment,M),x=!0)},o(M){B(w.$$.fragment,M),x=!1},d(M){M&&_(e),Z(w),P=!1,F()}}}function We(a){let e,n=a[1].contributionNote+"";return{c(){e=k("div"),this.h()},l(l){e=E(l,"DIV",{class:!0});var t=y(e);t.forEach(_),this.h()},h(){b(e,"class","mt-6 font-serif text-sm md:text-base text-muted-text-grey")},m(l,t){C(l,e,t),e.innerHTML=n},p:U,d(l){l&&_(e)}}}function Xe(a){let e,n,l,t,o,r,s=a[1].title+"",i,h,c,m,f,g,d,$,w,V,j=Object.keys(a[1].footnotes).length||a[1].contributionNote,L;te.title=e=a[1].title,d=new Pe({});let I=a[1].sections,v=[];for(let p=0;p<I.length;p+=1)v[p]=ke(me(a,I,p));const q=p=>B(v[p],1,1,()=>{v[p]=null});let S=j&&Ke(a);return{c(){n=H(),l=k("article"),t=k("div"),o=k("header"),r=k("h1"),i=D(s),h=H(),c=k("p"),m=D(a[0]),f=H(),g=k("div"),W(d.$$.fragment),$=H(),w=k("div");for(let p=0;p<v.length;p+=1)v[p].c();V=H(),S&&S.c(),this.h()},l(p){Le("svelte-iu3vwn",te.head).forEach(_),n=O(p),l=E(p,"ARTICLE",{class:!0});var x=y(l);t=E(x,"DIV",{});var P=y(t);o=E(P,"HEADER",{});var F=y(o);r=E(F,"H1",{class:!0});var Q=y(r);i=R(Q,s),Q.forEach(_),h=O(F),c=E(F,"P",{class:!0});var M=y(c);m=R(M,a[0]),M.forEach(_),F.forEach(_),f=O(P),g=E(P,"DIV",{class:!0});var z=y(g);X(d.$$.fragment,z),z.forEach(_),$=O(P),w=E(P,"DIV",{class:!0});var G=y(w);for(let T=0;T<v.length;T+=1)v[T].l(G);G.forEach(_),V=O(P),S&&S.l(P),P.forEach(_),x.forEach(_),this.h()},h(){b(r,"class","text-3xl md:text-4xl font-bold text-glacial-blue leading-[1.175] md:leading-[1.1]"),b(c,"class","text-muted-text-grey mt-3.5 md:mt-4"),b(g,"class","my-9 md:my-12"),b(w,"class","space-y-8"),b(l,"class","py-8 md:py-12 w-full max-w-screen-sm svelte-kswmg1")},m(p,N){C(p,n,N),C(p,l,N),u(l,t),u(t,o),u(o,r),u(r,i),u(o,h),u(o,c),u(c,m),u(t,f),u(t,g),Y(d,g,null),u(t,$),u(t,w);for(let x=0;x<v.length;x+=1)v[x].m(w,null);u(t,V),S&&S.m(t,null),L=!0},p(p,[N]){if((!L||N&2)&&e!==(e=p[1].title)&&(te.title=e),(!L||N&1)&&we(m,p[0]),N&2){I=p[1].sections;let x;for(x=0;x<I.length;x+=1){const P=me(p,I,x);v[x]?(v[x].p(P,N),A(v[x],1)):(v[x]=ke(P),v[x].c(),A(v[x],1),v[x].m(w,null))}for(ae(),x=I.length;x<v.length;x+=1)q(x);re()}j&&S.p(p,N)},i(p){if(!L){A(d.$$.fragment,p);for(let N=0;N<I.length;N+=1)A(v[N]);A(S),L=!0}},o(p){B(d.$$.fragment,p),v=v.filter(Boolean);for(let N=0;N<v.length;N+=1)B(v[N]);B(S),L=!1},d(p){p&&_(n),p&&_(l),Z(d),K(v,p),S&&S.d()}}}function Ye(a,e,n){let l,t;He(a,Re,m=>n(6,t=m));let{data:o}=e;const{post:r}=o;let s=[];function i(){if(t)return;const m=window.innerHeight/2;let f=0;for(let g=0;g<s.length&&s[g].getBoundingClientRect().top<=m;g++)f=g;De.set(f)}async function h(m){const f=Ie(),g=`footnote-ref-${m}`,d=document.getElementById(g);d&&(d.classList.add("footnote-bg-anim"),d.classList.add("footnote-bg-highlight"),await Se(d,{duration:1e3,ease:"out-expo",offset:f,centerInViewport:!0}),setTimeout(()=>{d.classList.remove("footnote-bg-highlight")},0))}Ne(()=>{const m=r.sections.map(($,w)=>({id:`section-${w}`,label:$.heading}));(Object.keys(r.footnotes).length||r.contributionNote)&&m.push({id:"section-notes",label:"Notes"}),Te(m),s=Array.from(document.querySelectorAll('[data-essay-section="true"]'));let f;function g(){f&&f.disconnect();const $=Math.floor(window.innerHeight/2),w={root:null,rootMargin:`-${$-1}px 0px -${$}px 0px`,threshold:0};f=new IntersectionObserver(i,w),s.forEach(V=>f.observe(V))}g();function d(){i(),g()}return window.addEventListener("resize",d),i(),()=>{window.removeEventListener("resize",d),f.disconnect()}});const c=m=>h(m);return a.$$set=m=>{"data"in m&&n(3,o=m.data)},n(0,l=new Date(r.date).toLocaleDateString("en-US",{month:"long",year:"numeric"})),[l,r,h,o,c]}class st extends ne{constructor(e){super(),oe(this,e,Ye,Xe,se,{data:3})}}export{st as default};
