import{S as _e,i as me,s as ge,k as y,l as E,m as $,h as m,n as k,b as F,C as M,R as K,e as U,q as P,a as R,r as A,c as H,F as u,H as ve,u as be,a9 as ye,aa as Ee,f as T,t as j,E as $e,o as we,x as W,y as X,z as Y,g as Z,d as ee,A as te}from"../../../../chunks/index-8f0f7409.js";import{g as ke,r as xe}from"../../../../chunks/reliableScroll-09e90851.js";import{I as Se}from"../../../../chunks/Icon-f7908583.js";import{S as Ie}from"../../../../chunks/Separator-95461b8e.js";import{t as Ne}from"../../../../chunks/parse-d81214d6.js";import{b as Pe,s as Ae,c as De}from"../../../../chunks/essayNav-4f34ebeb.js";function ae(a,e,l){const t=a.slice();return t[4]=e[l],t}function Oe(a){let e,l,t,n,o=" ",f,i,r,d=Q(a[4])+"",c,_,s=" ",p,h,I,x,N;function D(){return a[3](a[4])}return{c(){e=y("button"),l=y("span"),t=P("["),n=y("span"),f=P(o),i=R(),r=y("span"),c=P(d),_=y("span"),p=P(s),h=P("]"),I=R(),this.h()},l(v){e=E(v,"BUTTON",{class:!0});var V=$(e);l=E(V,"SPAN",{class:!0});var w=$(l);t=A(w,"["),n=E(w,"SPAN",{class:!0});var b=$(n);f=A(b,o),b.forEach(m),i=H(w),r=E(w,"SPAN",{class:!0});var S=$(r);c=A(S,d),S.forEach(m),_=E(w,"SPAN",{class:!0});var g=$(_);p=A(g,s),g.forEach(m),h=A(w,"]"),w.forEach(m),I=H(V),V.forEach(m),this.h()},h(){k(n,"class","text-[0.32rem]"),k(r,"class","underline decoration-glacial-blue/60 group-hover:decoration-glacial-blue"),k(_,"class","text-[0.32rem]"),k(l,"class","text-sm text-muted-text-grey group-hover:text-white transition-colors"),k(e,"class","group inline-flex items-baseline border-none bg-transparent p-0 cursor-pointer")},m(v,V){F(v,e,V),u(e,l),u(l,t),u(l,n),u(n,f),u(l,i),u(l,r),u(r,c),u(l,_),u(_,p),u(l,h),u(e,I),x||(N=ve(e,"click",D),x=!0)},p(v,V){a=v,V&1&&d!==(d=Q(a[4])+"")&&be(c,d)},d(v){v&&m(e),x=!1,N()}}}function Re(a){let e,l=a[4].text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"",t;return{c(){e=new ye(!1),t=U(),this.h()},l(n){e=Ee(n,!1),t=U(),this.h()},h(){e.a=t},m(n,o){e.m(l,n,o),F(n,t,o)},p(n,o){o&1&&l!==(l=n[4].text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"")&&e.p(l)},d(n){n&&m(t),n&&e.d()}}}function ce(a){let e;function l(o,f){if(o[4].type==="text")return Re;if(o[4].type==="ref")return Oe}let t=l(a),n=t&&t(a);return{c(){n&&n.c(),e=U()},l(o){n&&n.l(o),e=U()},m(o,f){n&&n.m(o,f),F(o,e,f)},p(o,f){t===(t=l(o))&&n?n.p(o,f):(n&&n.d(1),n=t&&t(o),n&&(n.c(),n.m(e.parentNode,e)))},d(o){n&&n.d(o),o&&m(e)}}}function He(a){let e,l,t=a[0],n=[];for(let o=0;o<t.length;o+=1)n[o]=ce(ae(a,t,o));return{c(){e=y("p");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=E(o,"P",{class:!0,id:!0});var f=$(e);for(let i=0;i<n.length;i+=1)n[i].l(f);f.forEach(m),this.h()},h(){k(e,"class","font-serif text-description-text-grey"),k(e,"id",l=a[1]?`footnote-ref-${a[1]}`:void 0)},m(o,f){F(o,e,f);for(let i=0;i<n.length;i+=1)n[i].m(e,null)},p(o,[f]){if(f&5){t=o[0];let i;for(i=0;i<t.length;i+=1){const r=ae(o,t,i);n[i]?n[i].p(r,f):(n[i]=ce(r),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}f&2&&l!==(l=o[1]?`footnote-ref-${o[1]}`:void 0)&&k(e,"id",l)},i:M,o:M,d(o){o&&m(e),K(n,o)}}}function Q(a){return a.num}function Te(a,e,l){let{tokens:t}=e,n;async function o(i){const r=ke({spacing:"sm"});await xe(`#footnote-${i}`,{duration:1e3,ease:"out-expo",offset:r})}const f=i=>o(Q(i));return a.$$set=i=>{"tokens"in i&&l(0,t=i.tokens)},a.$$.update=()=>{var i;a.$$.dirty&1&&l(1,n=(i=t.find(r=>r.type==="ref"))==null?void 0:i.num)},[t,n,o,f]}class Ve extends _e{constructor(e){super(),me(this,e,Te,He,ge,{tokens:0})}}function ie(a,e,l){const t=a.slice();return t[6]=e[l][0],t[7]=e[l][1],t}function fe(a,e,l){const t=a.slice();return t[10]=e[l],t[12]=l,t}function ue(a,e,l){const t=a.slice();return t[13]=e[l],t}function Ce(a){let e,l,t,n,o=a[1].title+"",f,i,r,d,c,_,s,p,h,I,x=Object.keys(a[1].footnotes).length,N;s=new Ie({});let D=a[1].sections,v=[];for(let b=0;b<D.length;b+=1)v[b]=de(fe(a,D,b));const V=b=>j(v[b],1,1,()=>{v[b]=null});let w=x&&je(a);return{c(){e=y("article"),l=y("div"),t=y("header"),n=y("h1"),f=P(o),i=R(),r=y("p"),d=P(a[0]),c=R(),_=y("div"),W(s.$$.fragment),p=R(),h=y("div");for(let b=0;b<v.length;b+=1)v[b].c();I=R(),w&&w.c(),this.h()},l(b){e=E(b,"ARTICLE",{class:!0});var S=$(e);l=E(S,"DIV",{});var g=$(l);t=E(g,"HEADER",{});var C=$(t);n=E(C,"H1",{class:!0});var q=$(n);f=A(q,o),q.forEach(m),i=H(C),r=E(C,"P",{class:!0});var z=$(r);d=A(z,a[0]),z.forEach(m),C.forEach(m),c=H(g),_=E(g,"DIV",{class:!0});var G=$(_);X(s.$$.fragment,G),G.forEach(m),p=H(g),h=E(g,"DIV",{class:!0});var J=$(h);for(let O=0;O<v.length;O+=1)v[O].l(J);J.forEach(m),I=H(g),w&&w.l(g),g.forEach(m),S.forEach(m),this.h()},h(){k(n,"class","text-3xl md:text-4xl font-bold text-glacial-blue leading-[1.175] md:leading-[1.1]"),k(r,"class","text-muted-text-grey mt-3.5 md:mt-4"),k(_,"class","my-9 md:my-12"),k(h,"class","space-y-8"),k(e,"class","py-8 md:py-12 max-w-screen-sm mx-auto")},m(b,S){F(b,e,S),u(e,l),u(l,t),u(t,n),u(n,f),u(t,i),u(t,r),u(r,d),u(l,c),u(l,_),Y(s,_,null),u(l,p),u(l,h);for(let g=0;g<v.length;g+=1)v[g].m(h,null);u(l,I),w&&w.m(l,null),N=!0},p(b,S){if((!N||S&1)&&be(d,b[0]),S&2){D=b[1].sections;let g;for(g=0;g<D.length;g+=1){const C=fe(b,D,g);v[g]?(v[g].p(C,S),T(v[g],1)):(v[g]=de(C),v[g].c(),T(v[g],1),v[g].m(h,null))}for(Z(),g=D.length;g<v.length;g+=1)V(g);ee()}x&&w.p(b,S)},i(b){if(!N){T(s.$$.fragment,b);for(let S=0;S<D.length;S+=1)T(v[S]);T(w),N=!0}},o(b){j(s.$$.fragment,b),v=v.filter(Boolean);for(let S=0;S<v.length;S+=1)j(v[S]);j(w),N=!1},d(b){b&&m(e),te(s),K(v,b),w&&w.d()}}}function Be(a){let e,l;return{c(){e=y("p"),l=P("Post not found."),this.h()},l(t){e=E(t,"P",{class:!0});var n=$(e);l=A(n,"Post not found."),n.forEach(m),this.h()},h(){k(e,"class","text-muted-text-grey")},m(t,n){F(t,e,n),u(e,l)},p:M,i:M,o:M,d(t){t&&m(e)}}}function he(a){let e,l;return e=new Ve({props:{tokens:Ne(a[13])}}),{c(){W(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,n){Y(e,t,n),l=!0},p:M,i(t){l||(T(e.$$.fragment,t),l=!0)},o(t){j(e.$$.fragment,t),l=!1},d(t){te(e,t)}}}function de(a){let e,l,t=a[10].heading+"",n,o,f,i,r,d=a[10].paragraphs,c=[];for(let s=0;s<d.length;s+=1)c[s]=he(ue(a,d,s));const _=s=>j(c[s],1,1,()=>{c[s]=null});return{c(){e=y("section"),l=y("h2"),n=P(t),o=R(),f=y("div");for(let s=0;s<c.length;s+=1)c[s].c();i=R(),this.h()},l(s){e=E(s,"SECTION",{id:!0,"data-essay-section":!0});var p=$(e);l=E(p,"H2",{class:!0});var h=$(l);n=A(h,t),h.forEach(m),o=H(p),f=E(p,"DIV",{class:!0});var I=$(f);for(let x=0;x<c.length;x+=1)c[x].l(I);I.forEach(m),i=H(p),p.forEach(m),this.h()},h(){k(l,"class","text-xl md:text-2xl font-semibold text-white"),k(f,"class","mt-3 space-y-4"),k(e,"id",`section-${a[12]}`),k(e,"data-essay-section","true")},m(s,p){F(s,e,p),u(e,l),u(l,n),u(e,o),u(e,f);for(let h=0;h<c.length;h+=1)c[h].m(f,null);u(e,i),r=!0},p(s,p){if(p&2){d=s[10].paragraphs;let h;for(h=0;h<d.length;h+=1){const I=ue(s,d,h);c[h]?(c[h].p(I,p),T(c[h],1)):(c[h]=he(I),c[h].c(),T(c[h],1),c[h].m(f,null))}for(Z(),h=d.length;h<c.length;h+=1)_(h);ee()}},i(s){if(!r){for(let p=0;p<d.length;p+=1)T(c[p]);r=!0}},o(s){c=c.filter(Boolean);for(let p=0;p<c.length;p+=1)j(c[p]);r=!1},d(s){s&&m(e),K(c,s)}}}function je(a){let e,l,t,n,o,f,i=Object.entries(a[1].footnotes),r=[];for(let c=0;c<i.length;c+=1)r[c]=pe(ie(a,i,c));const d=c=>j(r[c],1,1,()=>{r[c]=null});return{c(){e=y("div"),l=y("h2"),t=P("Notes"),n=R(),o=y("div");for(let c=0;c<r.length;c+=1)r[c].c();this.h()},l(c){e=E(c,"DIV",{class:!0,id:!0,"data-essay-section":!0});var _=$(e);l=E(_,"H2",{class:!0});var s=$(l);t=A(s,"Notes"),s.forEach(m),n=H(_),o=E(_,"DIV",{class:!0});var p=$(o);for(let h=0;h<r.length;h+=1)r[h].l(p);p.forEach(m),_.forEach(m),this.h()},h(){k(l,"class","text-xl md:text-2xl font-semibold text-white"),k(o,"class","mt-4 space-y-2"),k(e,"class","mt-[8em] md:mt-[12em]"),k(e,"id","section-notes"),k(e,"data-essay-section","true")},m(c,_){F(c,e,_),u(e,l),u(l,t),u(e,n),u(e,o);for(let s=0;s<r.length;s+=1)r[s].m(o,null);f=!0},p(c,_){if(_&6){i=Object.entries(c[1].footnotes);let s;for(s=0;s<i.length;s+=1){const p=ie(c,i,s);r[s]?(r[s].p(p,_),T(r[s],1)):(r[s]=pe(p),r[s].c(),T(r[s],1),r[s].m(o,null))}for(Z(),s=i.length;s<r.length;s+=1)d(s);ee()}},i(c){if(!f){for(let _=0;_<i.length;_+=1)T(r[_]);f=!0}},o(c){r=r.filter(Boolean);for(let _=0;_<r.length;_+=1)j(r[_]);f=!1},d(c){c&&m(e),K(r,c)}}}function pe(a){let e,l,t,n,o,f=" ",i,r,d,c=a[6]+"",_,s,p=" ",h,I,x,N,D,v=" ",V,w,b,S=a[7]+"",g,C,q,z,G;x=new Se({props:{name:"arrow-up",size:"12px",class:"inline text-muted-text-grey group-hover:text-white transition-colors"}});function J(){return a[4](a[6])}return{c(){e=y("div"),l=y("button"),t=y("p"),n=P("["),o=y("span"),i=P(f),r=R(),d=y("span"),_=P(c),s=y("span"),h=P(p),I=R(),W(x.$$.fragment),N=R(),D=y("span"),V=P(v),w=P("]"),b=R(),g=P(S),C=R(),this.h()},l(O){e=E(O,"DIV",{id:!0,class:!0});var L=$(e);l=E(L,"BUTTON",{class:!0});var le=$(l);t=E(le,"P",{class:!0});var B=$(t);n=A(B,"["),o=E(B,"SPAN",{class:!0});var ne=$(o);i=A(ne,f),ne.forEach(m),r=H(B),d=E(B,"SPAN",{class:!0});var oe=$(d);_=A(oe,c),oe.forEach(m),s=E(B,"SPAN",{class:!0});var re=$(s);h=A(re,p),re.forEach(m),I=H(B),X(x.$$.fragment,B),N=H(B),D=E(B,"SPAN",{class:!0});var se=$(D);V=A(se,v),se.forEach(m),w=A(B,"]"),B.forEach(m),le.forEach(m),b=H(L),g=A(L,S),C=H(L),L.forEach(m),this.h()},h(){k(o,"class","text-[0.9rem]"),k(d,"class","text-white underline decoration-glacial-blue"),k(s,"class","text-[0.32rem]"),k(D,"class","text-[0.32rem]"),k(t,"class","text-sm text-muted-text-grey group-hover:text-white transition-colors"),k(l,"class","group inline-flex items-center px-1 py-0.5 rounded border-none bg-transparent cursor-pointer hover:bg-gray-700 transition-colors"),k(e,"id",`footnote-${a[6]}`),k(e,"class","text-sm md:text-base text-muted-text-grey")},m(O,L){F(O,e,L),u(e,l),u(l,t),u(t,n),u(t,o),u(o,i),u(t,r),u(t,d),u(d,_),u(t,s),u(s,h),u(t,I),Y(x,t,null),u(t,N),u(t,D),u(D,V),u(t,w),u(e,b),u(e,g),u(e,C),q=!0,z||(G=ve(l,"click",J),z=!0)},p(O,L){a=O},i(O){q||(T(x.$$.fragment,O),q=!0)},o(O){j(x.$$.fragment,O),q=!1},d(O){O&&m(e),te(x),z=!1,G()}}}function Fe(a){let e,l,t,n;const o=[Be,Ce],f=[];function i(r,d){return r[1]?1:0}return e=i(a),l=f[e]=o[e](a),{c(){l.c(),t=U()},l(r){l.l(r),t=U()},m(r,d){f[e].m(r,d),F(r,t,d),n=!0},p(r,[d]){l.p(r,d)},i(r){n||(T(l),n=!0)},o(r){j(l),n=!1},d(r){f[e].d(r),r&&m(t)}}}function Le(a,e,l){let t,n;$e(a,De,d=>l(5,n=d));let{data:o}=e;const{post:f}=o;async function i(d){const c=ke({spacing:"default"});await xe(`#footnote-ref-${d}`,{duration:1e3,ease:"out-expo",offset:c,centerInViewport:!0})}we(()=>{if(!f)return;const d=f.sections.map((p,h)=>({id:`section-${h}`,label:p.heading}));Object.keys(f.footnotes).length&&d.push({id:"section-notes",label:"Notes"}),Pe(d);const c={root:null,rootMargin:"0px",threshold:[0,1]},_=Array.from(document.querySelectorAll('[data-essay-section="true"]')),s=new IntersectionObserver(()=>{if(n)return;const p=window.innerHeight/2,h=_.map(x=>x.getBoundingClientRect());let I=h.findIndex(x=>x.top<=p&&x.bottom>=p);if(I===-1){let x=0;for(let N=0;N<h.length&&h[N].top<=p;N++)x=N;I=x}Ae.update(x=>x===I?x:I)},c);return _.forEach(p=>s.observe(p)),()=>s.disconnect()});const r=d=>i(d);return a.$$set=d=>{"data"in d&&l(3,o=d.data)},l(0,t=f?new Date(f.date).toLocaleDateString("en-US",{month:"long",year:"numeric"}):""),[t,f,i,o,r]}class Ke extends _e{constructor(e){super(),me(this,e,Le,Fe,ge,{data:3})}}export{Ke as default};
