import{S as ne,i as oe,s as se,k as v,l as b,m as k,h as d,n as p,b as A,C as U,R as G,e as J,q as C,a as L,r as M,c as H,F as h,H as ye,u as we,a9 as $e,aa as xe,o as Ne,x as Q,a8 as Le,y as W,z as X,f as T,d as re,t as B,A as Y,E as He,O as Oe,M as Te,g as ae}from"../../../../chunks/index-1b60df3c.js";import{g as Ie,r as Se}from"../../../../chunks/reliableScroll-d53edb5e.js";import{I as Ae}from"../../../../chunks/Icon-bf4450dd.js";import{S as Pe}from"../../../../chunks/Separator-e4a3d9e5.js";import{b as De,s as Ce,c as Me}from"../../../../chunks/essayNav-a8b4dd3d.js";import{H as ee}from"../../../../chunks/index-3b593a9d.js";function he(i,e,n){const l=i.slice();return l[4]=e[n],l}function Re(i){let e,n,l,t,o=" ",a,r,s,_=le(i[4])+"",c,f,u=" ",E,w,O,$,V;function j(){return i[3](i[4])}return{c(){e=v("button"),n=v("span"),l=C("["),t=v("span"),a=C(o),r=L(),s=v("span"),c=C(_),f=v("span"),E=C(u),w=C("]"),O=L(),this.h()},l(S){e=b(S,"BUTTON",{class:!0});var N=k(e);n=b(N,"SPAN",{class:!0});var g=k(n);l=M(g,"["),t=b(g,"SPAN",{class:!0});var q=k(t);a=M(q,o),q.forEach(d),r=H(g),s=b(g,"SPAN",{class:!0});var I=k(s);c=M(I,_),I.forEach(d),f=b(g,"SPAN",{class:!0});var m=k(f);E=M(m,u),m.forEach(d),w=M(g,"]"),g.forEach(d),O=H(N),N.forEach(d),this.h()},h(){p(t,"class","text-[0.32rem]"),p(s,"class","underline decoration-glacial-blue/60 group-hover:decoration-glacial-blue"),p(f,"class","text-[0.32rem]"),p(n,"class","text-sm text-muted-text-grey group-hover:text-white transition-colors"),p(e,"class","group inline-flex items-baseline border-none bg-transparent p-0 cursor-pointer")},m(S,N){A(S,e,N),h(e,n),h(n,l),h(n,t),h(t,a),h(n,r),h(n,s),h(s,c),h(n,f),h(f,E),h(n,w),h(e,O),$||(V=ye(e,"click",j),$=!0)},p(S,N){i=S,N&1&&_!==(_=le(i[4])+"")&&we(c,_)},d(S){S&&d(e),$=!1,V()}}}function Be(i){let e,n=i[4].text+"",l;return{c(){e=new $e(!1),l=J(),this.h()},l(t){e=xe(t,!1),l=J(),this.h()},h(){e.a=l},m(t,o){e.m(n,t,o),A(t,l,o)},p(t,o){o&1&&n!==(n=t[4].text+"")&&e.p(n)},d(t){t&&d(l),t&&e.d()}}}function de(i){let e;function n(o,a){if(o[4].type==="text")return Be;if(o[4].type==="ref")return Re}let l=n(i),t=l&&l(i);return{c(){t&&t.c(),e=J()},l(o){t&&t.l(o),e=J()},m(o,a){t&&t.m(o,a),A(o,e,a)},p(o,a){l===(l=n(o))&&t?t.p(o,a):(t&&t.d(1),t=l&&l(o),t&&(t.c(),t.m(e.parentNode,e)))},d(o){t&&t.d(o),o&&d(e)}}}function Ve(i){let e,n,l=i[0],t=[];for(let o=0;o<l.length;o+=1)t[o]=de(he(i,l,o));return{c(){e=v("p");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=b(o,"P",{class:!0,id:!0});var a=k(e);for(let r=0;r<t.length;r+=1)t[r].l(a);a.forEach(d),this.h()},h(){p(e,"class","font-serif text-description-text-grey"),p(e,"id",n=i[1]?`footnote-ref-${i[1]}`:void 0)},m(o,a){A(o,e,a);for(let r=0;r<t.length;r+=1)t[r].m(e,null)},p(o,[a]){if(a&5){l=o[0];let r;for(r=0;r<l.length;r+=1){const s=he(o,l,r);t[r]?t[r].p(s,a):(t[r]=de(s),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}a&2&&n!==(n=o[1]?`footnote-ref-${o[1]}`:void 0)&&p(e,"id",n)},i:U,o:U,d(o){o&&d(e),G(t,o)}}}function le(i){return i.num}function je(i,e,n){let{tokens:l}=e,t;async function o(r){const s=Ie({spacing:"lg"}),_=`footnote-${r}`,c=document.getElementById(_);c&&(c.classList.add("footnote-bg-anim"),c.classList.add("footnote-bg-highlight"),await Se(c,{duration:1e3,ease:"out-expo",offset:s}),setTimeout(()=>{c.classList.remove("footnote-bg-highlight")},0))}const a=r=>o(le(r));return i.$$set=r=>{"tokens"in r&&n(0,l=r.tokens)},i.$$.update=()=>{var r;i.$$.dirty&1&&n(1,t=(r=l.find(s=>s.type==="ref"))==null?void 0:r.num)},[l,t,o,a]}class ze extends ne{constructor(e){super(),oe(this,e,je,Ve,se,{tokens:0})}}function Ue(i){let e,n,l;return{c(){e=v("pre"),n=v("code"),this.h()},l(t){e=b(t,"PRE",{});var o=k(e);n=b(o,"CODE",{class:!0});var a=k(n);a.forEach(d),o.forEach(d),this.h()},h(){p(n,"class",l="hljs "+(i[0]||""))},m(t,o){A(t,e,o),h(e,n),n.innerHTML=i[1]},p(t,[o]){o&2&&(n.innerHTML=t[1]),o&1&&l!==(l="hljs "+(t[0]||""))&&p(n,"class",l)},i:U,o:U,d(t){t&&d(e)}}}function qe(i,e,n){let{code:l}=e,{lang:t}=e,o="";return Ne(()=>{t&&ee.getLanguage(t)?n(1,o=ee.highlight(l,{language:t}).value):n(1,o=ee.highlightAuto(l).value)}),i.$$set=a=>{"code"in a&&n(2,l=a.code),"lang"in a&&n(0,t=a.lang)},[t,o,l]}class Fe extends ne{constructor(e){super(),oe(this,e,qe,Ue,se,{code:2,lang:0})}}const{document:te}=Oe;function _e(i,e,n){const l=i.slice();return l[8]=e[n][0],l[9]=e[n][1],l}function me(i,e,n){const l=i.slice();return l[12]=e[n],l[14]=n,l}function ge(i,e,n){const l=i.slice();return l[15]=e[n],l}function pe(i,e,n){const l=i.slice();return l[18]=e[n],l}function Je(i){let e,n=i[12].heading+"",l;return{c(){e=v("h2"),l=C(n),this.h()},l(t){e=b(t,"H2",{class:!0});var o=k(e);l=M(o,n),o.forEach(d),this.h()},h(){p(e,"class","text-xl md:text-2xl font-semibold text-white")},m(t,o){A(t,e,o),h(e,l)},p:U,d(t){t&&d(e)}}}function Ze(i){let e,n,l=i[15].items,t=[];for(let o=0;o<l.length;o+=1)t[o]=ve(pe(i,l,o));return{c(){e=v("ul");for(let o=0;o<t.length;o+=1)t[o].c();n=L(),this.h()},l(o){e=b(o,"UL",{class:!0});var a=k(e);for(let r=0;r<t.length;r+=1)t[r].l(a);n=H(a),a.forEach(d),this.h()},h(){p(e,"class","list-disc pl-5 space-y-2 font-serif text-description-text-grey")},m(o,a){A(o,e,a);for(let r=0;r<t.length;r+=1)t[r].m(e,null);h(e,n)},p(o,a){if(a&2){l=o[15].items;let r;for(r=0;r<l.length;r+=1){const s=pe(o,l,r);t[r]?t[r].p(s,a):(t[r]=ve(s),t[r].c(),t[r].m(e,n))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},i:U,o:U,d(o){o&&d(e),G(t,o)}}}function Ge(i){let e,n;return e=new Fe({props:{lang:i[15].lang,code:i[15].code}}),{c(){Q(e.$$.fragment)},l(l){W(e.$$.fragment,l)},m(l,t){X(e,l,t),n=!0},p:U,i(l){n||(T(e.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),n=!1},d(l){Y(e,l)}}}function Ke(i){let e,n;return e=new ze({props:{tokens:i[15].tokens}}),{c(){Q(e.$$.fragment)},l(l){W(e.$$.fragment,l)},m(l,t){X(e,l,t),n=!0},p:U,i(l){n||(T(e.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),n=!1},d(l){Y(e,l)}}}function ve(i){let e,n=i[18]+"";return{c(){e=v("li")},l(l){e=b(l,"LI",{});var t=k(e);t.forEach(d)},m(l,t){A(l,e,t),e.innerHTML=n},p:U,d(l){l&&d(e)}}}function be(i){let e,n,l,t;const o=[Ke,Ge,Ze],a=[];function r(s,_){return s[15].type==="paragraph"?0:s[15].type==="code"?1:s[15].type==="list"?2:-1}return~(e=r(i))&&(n=a[e]=o[e](i)),{c(){n&&n.c(),l=J()},l(s){n&&n.l(s),l=J()},m(s,_){~e&&a[e].m(s,_),A(s,l,_),t=!0},p(s,_){n&&n.p(s,_)},i(s){t||(T(n),t=!0)},o(s){B(n),t=!1},d(s){~e&&a[e].d(s),s&&d(l)}}}function ke(i){let e,n,l,t,o,a=i[12].heading!==i[1].title&&Je(i),r=i[12].content,s=[];for(let c=0;c<r.length;c+=1)s[c]=be(ge(i,r,c));const _=c=>B(s[c],1,1,()=>{s[c]=null});return{c(){e=v("section"),a&&a.c(),n=L(),l=v("div");for(let c=0;c<s.length;c+=1)s[c].c();t=L(),this.h()},l(c){e=b(c,"SECTION",{id:!0,"data-essay-section":!0});var f=k(e);a&&a.l(f),n=H(f),l=b(f,"DIV",{class:!0});var u=k(l);for(let E=0;E<s.length;E+=1)s[E].l(u);u.forEach(d),t=H(f),f.forEach(d),this.h()},h(){p(l,"class","space-y-4"),Te(l,"mt-3",i[12].heading!==i[1].title),p(e,"id",`section-${i[14]}`),p(e,"data-essay-section","true")},m(c,f){A(c,e,f),a&&a.m(e,null),h(e,n),h(e,l);for(let u=0;u<s.length;u+=1)s[u].m(l,null);h(e,t),o=!0},p(c,f){if(c[12].heading!==c[1].title&&a.p(c,f),f&2){r=c[12].content;let u;for(u=0;u<r.length;u+=1){const E=ge(c,r,u);s[u]?(s[u].p(E,f),T(s[u],1)):(s[u]=be(E),s[u].c(),T(s[u],1),s[u].m(l,null))}for(ae(),u=r.length;u<s.length;u+=1)_(u);re()}},i(c){if(!o){for(let f=0;f<r.length;f+=1)T(s[f]);o=!0}},o(c){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)B(s[f]);o=!1},d(c){c&&d(e),a&&a.d(),G(s,c)}}}function Qe(i){let e,n,l,t,o=Object.keys(i[1].footnotes).length,a,r,s=o&&We(i),_=i[1].contributionNote&&Xe(i);return{c(){e=v("div"),n=v("h2"),l=C("Notes"),t=L(),s&&s.c(),a=L(),_&&_.c(),this.h()},l(c){e=b(c,"DIV",{class:!0,id:!0,"data-essay-section":!0});var f=k(e);n=b(f,"H2",{class:!0});var u=k(n);l=M(u,"Notes"),u.forEach(d),t=H(f),s&&s.l(f),a=H(f),_&&_.l(f),f.forEach(d),this.h()},h(){p(n,"class","text-xl md:text-2xl font-semibold text-white"),p(e,"class","mt-[8em] md:mt-[12em]"),p(e,"id","section-notes"),p(e,"data-essay-section","true")},m(c,f){A(c,e,f),h(e,n),h(n,l),h(e,t),s&&s.m(e,null),h(e,a),_&&_.m(e,null),r=!0},p(c,f){o&&s.p(c,f),c[1].contributionNote&&_.p(c,f)},i(c){r||(T(s),r=!0)},o(c){B(s),r=!1},d(c){c&&d(e),s&&s.d(),_&&_.d()}}}function We(i){let e,n,l=Object.entries(i[1].footnotes),t=[];for(let a=0;a<l.length;a+=1)t[a]=Ee(_e(i,l,a));const o=a=>B(t[a],1,1,()=>{t[a]=null});return{c(){e=v("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=b(a,"DIV",{class:!0});var r=k(e);for(let s=0;s<t.length;s+=1)t[s].l(r);r.forEach(d),this.h()},h(){p(e,"class","mt-4 space-y-2")},m(a,r){A(a,e,r);for(let s=0;s<t.length;s+=1)t[s].m(e,null);n=!0},p(a,r){if(r&6){l=Object.entries(a[1].footnotes);let s;for(s=0;s<l.length;s+=1){const _=_e(a,l,s);t[s]?(t[s].p(_,r),T(t[s],1)):(t[s]=Ee(_),t[s].c(),T(t[s],1),t[s].m(e,null))}for(ae(),s=l.length;s<t.length;s+=1)o(s);re()}},i(a){if(!n){for(let r=0;r<l.length;r+=1)T(t[r]);n=!0}},o(a){t=t.filter(Boolean);for(let r=0;r<t.length;r+=1)B(t[r]);n=!1},d(a){a&&d(e),G(t,a)}}}function Ee(i){let e,n,l,t,o,a=" ",r,s,_,c=i[8]+"",f,u,E=" ",w,O,$,V,j,S=" ",N,g,q,I,m=i[9]+"",x,y,P,F;$=new Ae({props:{name:"arrow-up",size:"12px",class:"inline text-muted-text-grey group-hover:text-white transition-colors"}});function K(){return i[4](i[8])}return{c(){e=v("div"),n=v("button"),l=v("p"),t=C("["),o=v("span"),r=C(a),s=L(),_=v("span"),f=C(c),u=v("span"),w=C(E),O=L(),Q($.$$.fragment),V=L(),j=v("span"),N=C(S),g=C("]"),q=L(),I=new $e(!1),x=L(),this.h()},l(R){e=b(R,"DIV",{id:!0,class:!0});var z=k(e);n=b(z,"BUTTON",{class:!0});var Z=k(n);l=b(Z,"P",{class:!0});var D=k(l);t=M(D,"["),o=b(D,"SPAN",{class:!0});var ie=k(o);r=M(ie,a),ie.forEach(d),s=H(D),_=b(D,"SPAN",{class:!0});var ce=k(_);f=M(ce,c),ce.forEach(d),u=b(D,"SPAN",{class:!0});var fe=k(u);w=M(fe,E),fe.forEach(d),O=H(D),W($.$$.fragment,D),V=H(D),j=b(D,"SPAN",{class:!0});var ue=k(j);N=M(ue,S),ue.forEach(d),g=M(D,"]"),D.forEach(d),Z.forEach(d),q=H(z),I=xe(z,!1),x=H(z),z.forEach(d),this.h()},h(){p(o,"class","text-[0.9rem]"),p(_,"class","text-white underline decoration-glacial-blue"),p(u,"class","text-[0.32rem]"),p(j,"class","text-[0.32rem]"),p(l,"class","text-sm text-muted-text-grey group-hover:text-white transition-colors"),p(n,"class","group inline-flex items-center px-1 py-0.5 rounded border-none bg-transparent cursor-pointer hover:bg-gray-700 transition-colors"),I.a=x,p(e,"id",`footnote-${i[8]}`),p(e,"class","font-serif text-sm md:text-base text-muted-text-grey")},m(R,z){A(R,e,z),h(e,n),h(n,l),h(l,t),h(l,o),h(o,r),h(l,s),h(l,_),h(_,f),h(l,u),h(u,w),h(l,O),X($,l,null),h(l,V),h(l,j),h(j,N),h(l,g),h(e,q),I.m(m,e),h(e,x),y=!0,P||(F=ye(n,"click",K),P=!0)},p(R,z){i=R},i(R){y||(T($.$$.fragment,R),y=!0)},o(R){B($.$$.fragment,R),y=!1},d(R){R&&d(e),Y($),P=!1,F()}}}function Xe(i){let e,n=i[1].contributionNote+"";return{c(){e=v("div"),this.h()},l(l){e=b(l,"DIV",{class:!0});var t=k(e);t.forEach(d),this.h()},h(){p(e,"class","mt-6 font-serif text-sm md:text-base text-muted-text-grey")},m(l,t){A(l,e,t),e.innerHTML=n},p:U,d(l){l&&d(e)}}}function Ye(i){let e,n,l,t,o,a,r=i[1].title+"",s,_,c,f,u,E,w,O,$,V,j=Object.keys(i[1].footnotes).length||i[1].contributionNote,S;te.title=e=i[1].title,w=new Pe({});let N=i[1].sections,g=[];for(let m=0;m<N.length;m+=1)g[m]=ke(me(i,N,m));const q=m=>B(g[m],1,1,()=>{g[m]=null});let I=j&&Qe(i);return{c(){n=L(),l=v("article"),t=v("div"),o=v("header"),a=v("h1"),s=C(r),_=L(),c=v("p"),f=C(i[0]),u=L(),E=v("div"),Q(w.$$.fragment),O=L(),$=v("div");for(let m=0;m<g.length;m+=1)g[m].c();V=L(),I&&I.c(),this.h()},l(m){Le("svelte-iu3vwn",te.head).forEach(d),n=H(m),l=b(m,"ARTICLE",{class:!0});var y=k(l);t=b(y,"DIV",{});var P=k(t);o=b(P,"HEADER",{});var F=k(o);a=b(F,"H1",{class:!0});var K=k(a);s=M(K,r),K.forEach(d),_=H(F),c=b(F,"P",{class:!0});var R=k(c);f=M(R,i[0]),R.forEach(d),F.forEach(d),u=H(P),E=b(P,"DIV",{class:!0});var z=k(E);W(w.$$.fragment,z),z.forEach(d),O=H(P),$=b(P,"DIV",{class:!0});var Z=k($);for(let D=0;D<g.length;D+=1)g[D].l(Z);Z.forEach(d),V=H(P),I&&I.l(P),P.forEach(d),y.forEach(d),this.h()},h(){p(a,"class","text-3xl md:text-4xl font-bold text-glacial-blue leading-[1.175] md:leading-[1.1]"),p(c,"class","text-muted-text-grey mt-3.5 md:mt-4"),p(E,"class","my-9 md:my-12"),p($,"class","space-y-8"),p(l,"class","py-8 md:py-12 w-full max-w-screen-sm svelte-kswmg1")},m(m,x){A(m,n,x),A(m,l,x),h(l,t),h(t,o),h(o,a),h(a,s),h(o,_),h(o,c),h(c,f),h(t,u),h(t,E),X(w,E,null),h(t,O),h(t,$);for(let y=0;y<g.length;y+=1)g[y].m($,null);h(t,V),I&&I.m(t,null),S=!0},p(m,[x]){if((!S||x&2)&&e!==(e=m[1].title)&&(te.title=e),(!S||x&1)&&we(f,m[0]),x&2){N=m[1].sections;let y;for(y=0;y<N.length;y+=1){const P=me(m,N,y);g[y]?(g[y].p(P,x),T(g[y],1)):(g[y]=ke(P),g[y].c(),T(g[y],1),g[y].m($,null))}for(ae(),y=N.length;y<g.length;y+=1)q(y);re()}j&&I.p(m,x)},i(m){if(!S){T(w.$$.fragment,m);for(let x=0;x<N.length;x+=1)T(g[x]);T(I),S=!0}},o(m){B(w.$$.fragment,m),g=g.filter(Boolean);for(let x=0;x<g.length;x+=1)B(g[x]);B(I),S=!1},d(m){m&&d(n),m&&d(l),Y(w),G(g,m),I&&I.d()}}}function et(i,e,n){let l,t;He(i,Me,f=>n(6,t=f));let{data:o}=e;const{post:a}=o;let r=[];function s(){if(t)return;const f=window.innerHeight/2;let u=0;for(let E=0;E<r.length&&r[E].getBoundingClientRect().top<=f;E++)u=E;Ce.set(u)}async function _(f){const u=Ie(),E=`footnote-ref-${f}`,w=document.getElementById(E);w&&(w.classList.add("footnote-bg-anim"),w.classList.add("footnote-bg-highlight"),await Se(w,{duration:1e3,ease:"out-expo",offset:u,centerInViewport:!0}),setTimeout(()=>{w.classList.remove("footnote-bg-highlight")},0))}Ne(()=>{const f=a.sections.map((O,$)=>({id:`section-${$}`,label:O.heading}));(Object.keys(a.footnotes).length||a.contributionNote)&&f.push({id:"section-notes",label:"Notes"}),De(f),r=Array.from(document.querySelectorAll('[data-essay-section="true"]'));let u;function E(){u&&u.disconnect();const O=Math.floor(window.innerHeight/2),$={root:null,rootMargin:`-${O-1}px 0px -${O}px 0px`,threshold:0};u=new IntersectionObserver(s,$),r.forEach(V=>u.observe(V))}E();function w(){s(),E()}return window.addEventListener("resize",w),s(),()=>{window.removeEventListener("resize",w),u.disconnect()}});const c=f=>_(f);return i.$$set=f=>{"data"in f&&n(3,o=f.data)},n(0,l=new Date(a.date).toLocaleDateString("en-US",{month:"long",year:"numeric",timeZone:"UTC"})),[l,a,_,o,c]}class at extends ne{constructor(e){super(),oe(this,e,et,Ye,se,{data:3})}}export{at as default};
